# ==============================================
# CONFIGURAÇÕES DO SUPABASE
# ==============================================

# URL do projeto Supabase (obtenha em: https://app.supabase.com/project/_/settings/api)
SUPABASE_URL=https://your-project-ref.supabase.co

# Chave anônima do Supabase (obtenha em: https://app.supabase.com/project/_/settings/api)
SUPABASE_ANON_KEY=your-anon-key-here

# Chave de service role do Supabase (obtenha em: https://app.supabase.com/project/_/settings/api)
# ATENÇÃO: Esta chave deve ser mantida em segredo e nunca exposta no frontend
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ==============================================
# CONFIGURAÇÕES DO SERVIDOR
# ==============================================

# Porta onde o servidor NestJS será executado
# Use 4000 para evitar conflito com o Next.js (3000)
PORT=4000

# ==============================================
# CONFIGURAÇÃO DO BANCO DE DADOS (PRISMA)
# ==============================================

# URL de conexão do banco de dados Postgres usada pelo Prisma.
# Em desenvolvimento com Supabase local, use o padrão abaixo:
# postgresql://postgres:postgres@127.0.0.1:54322/postgres
#
# Em produção, configure com a URL do seu banco (Supabase/Cloud/Postgres gerenciado).
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres

# URL direta (opcional) para operações administrativas; pode ser igual à DATABASE_URL
DIRECT_URL=${DATABASE_URL}

# ==============================================
# CONFIGURAÇÕES DO BELVO
# ==============================================

# Credenciais da API Belvo
# Use o ambiente sandbox por padrão
BELVO_SECRET_ID=your-belvo-secret-id
BELVO_SECRET_PASSWORD=your-belvo-secret-password
BELVO_API_URL=https://sandbox.belvo.com
BELVO_WIDGET_SCOPES=read_institutions,write_links,read_consents,write_consents,write_consent_callback,delete_consents
BELVO_FETCH_RESOURCES=ACCOUNTS,TRANSACTIONS,OWNERS

# Configuração de Webhook (opcional, para Edge Functions)
# Configure esta chave no painel do Belvo para validar webhooks
WEBHOOK_SECRET_KEY=your-belvo-webhook-secret-key

# URL do projeto Supabase (usado nas Edge Functions)
PROJECT_URL=https://your-project-ref.supabase.co

# Chave de service role (usado nas Edge Functions)
SERVICE_ROLE_KEY=your-service-role-key-here

# ==============================================
# CONFIGURAÇÕES OPCIONAIS
# ==============================================

# Chave da API OpenAI (para funcionalidades de IA no Supabase Studio)
OPENAI_API_KEY=your-openai-api-key-here

# ==============================================
# CONFIGURAÇÕES DE CORS E URL
# ==============================================

# Para deploy em produção, também atualize:
# 1. src/main.ts - Adicione a URL do frontend de produção nas origens CORS
# 2. supabase/config.toml - Atualize site_url e additional_redirect_urls
# 3. Painel do Supabase - Configure variáveis de ambiente de produção
#
# Exemplo de URLs de produção:
# FRONTEND_URL=https://seu-dominio-frontend.com
# BACKEND_URL=https://seu-dominio-backend.com

# ==============================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ==============================================

# 1. Copie este arquivo para .env na raiz do projeto
# 2. Substitua todos os valores "your-*-here" pelos valores reais
# 3. Nunca commite o arquivo .env no controle de versão
# 4. Para desenvolvimento local com Supabase, use:
#    SUPABASE_URL=http://127.0.0.1:54321
#    SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# ==============================================
# VARIÁVEIS PARA FRONTEND (NEXT_PUBLIC_)
# ==============================================

# Para que o frontend (browser) consiga inicializar o cliente do Supabase,
# defina também as variáveis com NEXT_PUBLIC_. Em produção, mantenha os valores
# alinhados com SUPABASE_URL/SUPABASE_ANON_KEY.
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# ==============================================
# CONFIGURAÇÃO PARA EDGE FUNCTIONS
# ==============================================

# Para as Edge Functions funcionarem corretamente, você precisa configurar
# as seguintes variáveis de ambiente no painel do Supabase:
# 
# 1. Acesse: https://app.supabase.com/project/_/settings/functions
# 2. Adicione as seguintes variáveis:
#    - WEBHOOK_SECRET_KEY
#    - PROJECT_URL  
#    - SERVICE_ROLE_KEY
#    - SUPABASE_URL
#    - SUPABASE_SERVICE_ROLE_KEY